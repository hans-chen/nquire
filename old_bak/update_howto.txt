CIT200 update tool how to

1   Update

The Update tool for cit200 contain: Ftp Server(vsftpd)   host pack script(host_pack_tar.sh)   target unpack script(target_unpack_tar.sh) and ftp client(host use only).

According to the following steps to update.
First,run vsftpd in the development board.
	vsftpd &
Second,use "host_pcak_tar.sh" script to creat a application package.
	./host_pack_tar.sh -s [the direcotry of cit200 application]
it will create app_1.1.tar package.

Third,use ftp client to upload application package into ram of development board 
	ftp 192.168.2.232
	login with user "ftp"
	put app_1.0.tar
Finally, use "target_unpack_tar.sh" script to unpack application package.
	target_unpack_tar.sh -s /home/ftp/app_1.0.tar

2   Ftp server how to

We configure vsftpd to only allow anonymous user to login.So the name of allow to login user is ftp.And the default directory of the user ftp, is /home/ftp.
We mount tmpfs filesystem on /home/ftp.So the ftp client upload file will be stored in the ram.The memory size of cit200 is 32MB,it's enough to store kernel image, rootfs or cit200 application.

NOTE:we always get the update package on the /home/ftp.

3   host pack script how to 

Now the script can pack the kernel image file or cit200 application files .
The name and the version is up to options.The style of output file is $name_$version.tar
the default name of application package is "app".
the default name of kernel image package is "kernel_image".
the default version of package is "1.0".

Usage:  /bin/host_pack_tar.sh [OPTIONS]

Packing tool for cit200
Options:
       -k FILE                 Pack a kernel_image_file
       -s PATH                 Pack the application for cit200. 
       -v VERISON              the version of kernel or application.  Default vaule: 1.0
       -n NAME                 the name of kernel image or application package.
                               the default name of application package is "app".
                               the default name of kernel image package is "kernel_image".
       -h                      Show this usage guide.

example:
       ./host_pack_tar.sh -s cit-0.4-5-g3559f64 -v 1.1
it will create app_1.1.tar package.
       ./host_pack_tar.sh -k cit200_image -v 1.1
it will creat kernel_image_1.1.tar package.

4   target unpack script how to 

This script is used in the development board to unpack application package or kernel image package.
The default path to unpack application package :  /cit200
The default path to unpack kernel image package:  /home/ftp

Usage:  /bin/target_unpack_tar.sh [OPTIONS]

Unpacking tool for cit200
Options:
       -k FILE                 Unpack kernel_image_file.tar package.
       -s FILE                 Unpack the application for cit200 package.
       -h                      Show this usage guide.

example:
       /bin/target_unpack_tar.sh -s app_1.0.tar
it willl unpack app_1.0.tar on the /cit200
       /bin/target_unpack_tar.sh -k cit200_image_1.0.tar
it willl unpack cit200_image_1.0.tar on the /home/ftp

5   the application auto update how to

Some advice for the application how to auto update:
We need a task to scan the directory(/home/ftp) to find updata package.The task will run in the interval time.
We can differentiate the application package and kernel image package through the name of package.
After update remove the files on the /home/ftp.