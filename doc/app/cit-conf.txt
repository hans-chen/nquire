= Configuration file: cit.conf =
Maarten van Dootingh <maarten@vdtai.nl>

Revision history

`-------`-----------------------`-------------------------------------------------------------
v1.0 	March 18 2010           Initial version
v1.1    April 2 2010            Update documenting authentication section
----------------------------------------------------------------------------------------------

== Introduction == 

The NQuire can be configured using a configuration file: cit.conf. This file can
be maintained using the webui, or manually using a text-editor. When using the 
text-editor, one should first download the file from the nquire using ftp.
Than the file has to be changed, after which the file can be uploaded using ftp.

When changing the file, one should adhere to the format of the file.

The configuration file can also be used to reset the configuration when the
nquire has become unreachable (eg passwords forgotten). Ressetting is done by
putting a cit.conf on a micro-sd card and insert that in the device. 
During boot, that file will be used instead.

== Format ==

The configuration file is a line oriented file.
Each line contains one of:
 - an empty line
 - a comment line (starting with a '#'
 - a configuration item.

A configuration line is formatted as follows:

-------
<config-id> '=' <value>

or 

<config-id> '=' "<value>"
-------

The config-id exists of a path and a name. The '=' sign can be surrounded by 
space or tab charracters , which will be ignored. When a value has spaces in it,
one can use quotes. 
All string values will be quoted when generated by the nquire application.

Only escape charracters that have any meaning are implemented for string values.
These are:

-------
\n     translates as a new-line charracter (=\x0a)
\"     translates as a quote ('"')
\\     translates as ('\')
\xnn   translates as the hexadecimal charracter value equal to nn
-------

When the escape charracter '\' is used before any other charracter, it is just
left as is.

Eg:
-------
/dev/mifare/msg/incomplete_scan/text = "Wait for \"beep\" when scanning"
-------

Note that using control charracters other than '\n' has no meaning for string
values such as the welcome message.


Consequently, the webui has no way of dealing with these escapes.

== Comment on some settings ==

=== Authentication ===

When authentication is turned on in the webui, the nquire will be username and
password protected. The same username and password is used for the webui as for
ftp access.

E.g.:

------
# Authentication

/dev/auth/enable = true
/dev/auth/username = "piet"
/dev/auth/encrypted = "BwVYu14F3zRDalosNitNU/"
------

The password is not stored unencrypted.
It is possible to use a settings barcode or a cit.conf to change the 
authentication of the device.

NOTE: the encrypted password has to be generated by the nquire. This can be done
	by setting the password using the webui and than download the cit.conf.

NOTE: enabling authentication (either by magic barcode or by upload of cit.conf)
	should always be accompanied by an encrypted password.
	
NOTE: the username is NOT reset when disabling authentication. This means that
	anabling authentication with only /dev/auth/enable and /dev/auth/encrypted
	will work using the previous password!

E.g. (user=piet, password=puck):

image:img/auth_on_piet_puck.png[user=piet, password=puck]



== Default content ==

The default content as of application version 1.4 is:

-------

# Settings


# CIT settings

/cit/codepage = "ibm852"
/cit/tcp_port = 9101
/cit/udp_port = 9000
/cit/mode = "server"
/cit/remote_ip = 192.168.1.201
/cit/disable_scan_beep = false
/cit/programming_mode_timeout = 15
/cit/loglevel = 3

# Messages


# Font sizes

/cit/messages/fontsize/small = 18
/cit/messages/fontsize/large = 28

# Idle message

/cit/messages/idle/timeout = 3

# 

/cit/messages/idle/picture/show = false
/cit/messages/idle/picture/xpos = 0
/cit/messages/idle/picture/ypos = 0

# Line 1

/cit/messages/idle/1/text = "Welcome"
/cit/messages/idle/1/xpos = 0
/cit/messages/idle/1/ypos = 10
/cit/messages/idle/1/valign = "top"
/cit/messages/idle/1/halign = "center"
/cit/messages/idle/1/size = "large"

# Line 2

/cit/messages/idle/2/text = "Scan your product"
/cit/messages/idle/2/xpos = 0
/cit/messages/idle/2/ypos = 50
/cit/messages/idle/2/valign = "top"
/cit/messages/idle/2/halign = "center"
/cit/messages/idle/2/size = "small"

# Line 3

/cit/messages/idle/3/text = "↓ ↓ ↓ ↓"
/cit/messages/idle/3/xpos = 0
/cit/messages/idle/3/ypos = 80
/cit/messages/idle/3/valign = "top"
/cit/messages/idle/3/halign = "center"
/cit/messages/idle/3/size = "small"

# Error message

/cit/messages/error/timeout = 1

# Line 1

/cit/messages/error/1/text = "Please ask"
/cit/messages/error/1/xpos = 0
/cit/messages/error/1/ypos = 30
/cit/messages/error/1/valign = "top"
/cit/messages/error/1/halign = "center"
/cit/messages/error/1/size = "small"

# Line 2

/cit/messages/error/2/text = "for assistance"
/cit/messages/error/2/xpos = 0
/cit/messages/error/2/ypos = 60
/cit/messages/error/2/valign = "top"
/cit/messages/error/2/halign = "center"
/cit/messages/error/2/size = "small"

# Network settings

/network/interface = "ethernet"
/network/dhcp = false

# 


# IP settings

/network/ip/address = 192.168.1.200
/network/ip/netmask = 255.255.255.0
/network/ip/gateway = 192.168.1.254
/network/ip/ns1 = 194.109.6.66
/network/ip/ns2 = 194.109.9.99

# Wlan settings

/network/wifi/essid = "default"
/network/wifi/keytype = "off"
/network/wifi/key = "1122334455"

# GPRS/UMTS settings

/network/gprs/pin = 0000
/network/gprs/username = ""
/network/gprs/password = ""
/network/gprs/apn = "internet"
/network/gprs/number = "*99***1#"

# Device settings

/dev/name = "Newland NQuire 200"

# Authentication

/dev/auth/enable = false
/dev/auth/username = "admin"
/dev/auth/encrypted = ""

# Barcode authentication

/dev/barcode_auth/enable = false
/dev/barcode_auth/security_code = ""

# Modem

/dev/modem/device = "/dev/ttyS1"
/dev/modem/baudrate = 9600

# Scanner

/dev/scanner/barcodes = "1D only"
/dev/scanner/enable_barcode_id = true
/dev/scanner/illumination_led = "Blinking"
/dev/scanner/reading_sensitivity = "Low"
/dev/scanner/aiming_led = "Blinking"
/dev/scanner/1d_scanning_mode = "Sensor mode"
/dev/scanner/multi_reading_constraint = "Semi"

# Barcodes

/dev/scanner/enable-disable/UCC_EAN-128 = true
/dev/scanner/enable-disable/EAN-8 = true
/dev/scanner/enable-disable/EAN-13 = true
/dev/scanner/enable-disable/UPC-E = true
/dev/scanner/enable-disable/UPC-A = true
/dev/scanner/enable-disable/Interleaved-2_of_5 = true
/dev/scanner/enable-disable/Code39 = true
/dev/scanner/enable-disable/Codabar = true
/dev/scanner/enable-disable/Code93 = true
/dev/scanner/enable-disable/GS1_Databar = true
/dev/scanner/enable-disable/ISBN = true
/dev/scanner/enable-disable/Code-11 = true
/dev/scanner/enable-disable/2_5-Matrix = true
/dev/scanner/enable-disable/ITF14 = true
/dev/scanner/enable-disable/MSI-Plessey = true
/dev/scanner/enable-disable/Plessey = true
/dev/scanner/enable-disable/2_5-Standard = true
/dev/scanner/enable-disable/2_5-Industrial = true
/dev/scanner/enable-disable/PDF417 = true
/dev/scanner/enable-disable/QR_Code = true
/dev/scanner/enable-disable/Aztec = true
/dev/scanner/enable-disable/DataMatrix = true
/dev/scanner/enable-disable/Chinese-Sensible = true

# External Scanner

/dev/extscanner/device = "/dev/tty0"

# Mifare scanner

/dev/mifare/device = "/dev/ttyS2"
/dev/mifare/key = "\x0f\x0f\x0f\x0f\x0f\x0f\x0f\x0f\x0f\x0f\x0f\x0f"
/dev/mifare/relevant_sectors = "1,3,5,15"
/dev/mifare/prevent_duplicate_scan_timeout = 3
/dev/mifare/cardnum_format = "hexadecimal"
/dev/mifare/sector_data_format = "binary"

# Error messages


# Message for

/dev/mifare/msg/incomplete_scan/text = "Wait for beep when scanning"

# Message for

/dev/mifare/msg/access_violation/text = "Card access denied"

# Touch keypad

/dev/touch16/device = "/dev/event0"
/dev/touch16/prefix = "K"
/dev/touch16/timeout = 60
/dev/touch16/keyclick = "o3c100"
/dev/touch16/send_active_keys_only = true

# Beeper

/dev/beeper/device = "/dev/beeper"
/dev/beeper/volume = 4
/dev/beeper/beeptype = 1
/dev/beeper/tune_startup = "o3c16g16"
/dev/beeper/tune_shutdown = "o3g16c16"
/dev/beeper/tune_error = "o3c16o2f8"
/dev/beeper/tune_1 = "o3c32"
/dev/beeper/tune_2 = "o4c32"
/dev/beeper/tune_3 = "o5c32"

# Display

/dev/display/mode = "240x128m"
/dev/display/contrast = 2
/dev/display/contrast_min = 100
/dev/display/contrast_max = 160

# End

-------
